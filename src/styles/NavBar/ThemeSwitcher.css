/* View Transition Animation - Prevent flicker during theme switch */

/* Circle wipe animation ONLY when theme is transitioning */

/* This prevents the animation from appearing on nav links, modals, etc. */

/* Note: We check for the data attribute on :root and apply to pseudo-elements */
::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: 0.5s !important;
  animation-timing-function: ease-in-out !important;
}

/* Old view stays in place and fades out */
::view-transition-old(root) {
  z-index: 1;
  animation-name: none !important;
}

/* New view clips in with circular reveal - only when data attribute is present */
::view-transition-new(root) {
  z-index: 2;
  animation-name: var(--theme-transition-animation, none) !important;
}

/* Circular reveal animation */
@keyframes reveal-theme {
  from {
    clip-path: circle(0 at var(--x, 50%) var(--y, 50%));
  }

  to {
    clip-path: circle(var(--r, 100vmax) at var(--x, 50%) var(--y, 50%));
  }
}

/* Optimize theme transition performance */
:root {
  color-scheme: light dark;
}

/* Custom Toggle Button */
.theme-toggle-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.3s ease;
  z-index: 1;
}

.theme-toggle-button:hover {
  transform: scale(1.1);
}

.theme-toggle-button:active {
  transform: scale(0.95);
}

/* Morph Icon Styling */
.morph-icon {
  overflow: visible;
}

/* Sun elements (rays and circle) - always yellow */
.sun-rays,
.sun-circle {
  color: var(--color-yellow);
  transition:
    opacity 0.6s ease-in-out,
    transform 0.6s ease-in-out;
  transform-origin: center;
}

/* Moon path - always yellow */
.moon-path {
  color: var(--color-yellow);
  transition:
    opacity 0.6s ease-in-out,
    transform 0.6s ease-in-out;
  transform-origin: center;
}

/* Visible state */
.sun-rays.visible {
  opacity: 1;
  transform: rotate(0deg) scale(1);
}

.sun-circle.visible {
  opacity: 1;
  transform: scale(1);
}

.moon-path.visible {
  opacity: 1;
  transform: scale(1) rotate(0deg);
}

/* Hidden state with transform */
.sun-rays.hidden {
  opacity: 0;
  transform: rotate(180deg) scale(0.5);
}

.sun-circle.hidden {
  opacity: 0;
  transform: scale(0.3);
}

.moon-path.hidden {
  opacity: 0;
  transform: scale(0.3) rotate(-90deg);
}

@media screen and (max-width: 1100px) {
  .theme-toggle-button {
    padding: 12px;
    z-index: auto; /* Remove z-index on mobile to allow parent li animation to work */
  }

  .theme-icon {
    width: 35px;
    height: 35px;
  }
}
